<html>
<head>
	<title>Current Games</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
	<style> 
		.row {
			padding: 12px;
		}
		.center-align > p {
			font-size: 180%;
		}
		.game_div {
			padding: 3px;
		}
		.game_div > p {
			margin: 4px;
		}
		.player {
			font-size: 70%;
		}
	</style>
</head>
<body>
	<nav class="center-align">
		<p>Current Games</p>
	</nav>
	<br>
	<div class="container red lighten-3">
		<div class="row" style="margin: 0px">
			<div class="col s3">
				<div class="blue game_div z-depth-3">
					<h5>Cool People Only</h5>
					<p style="font-size: 125%">Current Players:</p>
					<p class="player">MilkMan24</p>
					<p class="player">LuckyGuy13</p>
					<p class="player">JoeShmoe</p>
					<p class="player">Erik</p>
				</div>
				
			</div>
			<div class="col s3">
				<div class="blue game_div z-depth-2">
					<h5>Cool People Suck</h5>
					<p style="font-size: 125%">Current Players:</p>
					<p class="player">MilkMan22</p>
				</div>
				
			</div>
			<div class="col s3">
				<div class="blue game_div">
					<h5>Henry's Lobby</h5>
					<p style="font-size: 125%">Current Players:</p>
					<p class="player">HenryTheHenry</p>
					<p class="player">NotHenry</p>
					<p class="player">StillNotHenry</p>
					<p class="player">Erik</p>
					<p class="player">Guy123</p>
				</div>
				
			</div>
			<div class="col s3">
				<div class="blue game_div">
					<h5>Cool People Only</h5>
					<p style="font-size: 125%">Current Players:</p>
					<p class="player">MilkMan24</p>
					<p class="player">LuckyGuy13</p>
					<p class="player">JoeShmoe</p>
					<p class="player">Erik</p>
				</div>
				
			</div>	
		</div>

		<div class="row">
			<a class="waves-effect waves-light btn green accent-3">Create Lobby</a>
		</div>
		<div class="row">
			<div id="player_bank" class="col s4 offset-s1 yellow">
				<h5>In Main Lobby</h5>
				<div id="players"></div>
			</div>
			<div class="col s5 offset-s1 light-green accent-1">
		       <form>
		          <div class="row" style="margin: 0px">
		             <div class="input-field col s6">
		                <input placeholder="Username" id="first_name" type="text" class="validate">
		          	 </div>
		          	 <div class="input-field col s6">
		            	<input  placeholder="password" id="password" type="text" class="validate">
		          	 </div>
		          </div>
		          <a class="waves-effect waves-dark btn green accent-3">Register</a>
		       </form>
			</div>
		</div>
		
	</div>
        
	<script src="https://code.jquery.com/jquery.js"></script>		
	<script src="https://www.gstatic.com/firebasejs/4.7.0/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyAJoEFrLqa_WPI4S6SeVRsVdPBlAAbZ5Eg",
	    authDomain: "buy-game-d14de.firebaseapp.com",
	    databaseURL: "https://buy-game-d14de.firebaseio.com",
	    projectId: "buy-game-d14de",
	    storageBucket: "buy-game-d14de.appspot.com",
	    messagingSenderId: "356316304251"
	  };
	  firebase.initializeApp(config);
	  
	  var database = firebase.database();
	  var players = [];

	  database.ref().on('value', function(snapshot) {
	  	console.log(snapshot.val());

	  	players = snapshot.val().users;
		
		// Checks data from firebase db 
		// TODO - err handle if cannot connect to db
	  	if( players[0].name === "Jon" ) {
	  		console.log("error");
	  	} else {
	  		display(players);
	  	}
	  	
	  });

	  function display(array) {
	  	$("#players").empty();

	  	$(array).each( function(i) {	
	  		var p = $("<p>");
	  		p.html(array[i]);
	  		$("#players").append(p);	
	  	});
	  }

	  $(document).ready(function() {

	  });
	</script>	

</body>
</html>